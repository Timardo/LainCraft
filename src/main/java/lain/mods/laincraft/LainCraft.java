package lain.mods.laincraft;

import java.util.Arrays;
import java.util.Set;
import lain.mods.laincraft.asm.SharedConstants;
import net.minecraft.util.EnumChatFormatting;
import com.google.common.eventbus.EventBus;
import cpw.mods.fml.common.DummyModContainer;
import cpw.mods.fml.common.LoadController;
import cpw.mods.fml.common.ModMetadata;

public class LainCraft extends DummyModContainer
{

    public LainCraft()
    {
        super(new ModMetadata());
        getMetadata();
    }

    @Override
    public ModMetadata getMetadata()
    {
        ModMetadata md = super.getMetadata();
        md.modId = "LainCraft";
        md.name = "LainCraft";
        md.version = "1.1a";
        md.authorList = Arrays.asList("Lain");
        md.description = "";
        md.autogenerated = false;
        StringBuilder var1 = new StringBuilder("\nPlugins:");
        Set<Plugin> plugins = (Set<Plugin>) SharedConstants.getPlugins();
        if (plugins.isEmpty())
            var1.append(" ").append(EnumChatFormatting.RED).append("no plugins installed.").append(EnumChatFormatting.RESET);
        else
            for (Plugin plugin : plugins)
                var1.append(" ").append(plugin.isEnabled() ? EnumChatFormatting.GREEN : EnumChatFormatting.RED).append(plugin.getName()).append(EnumChatFormatting.RESET);
        md.description = md.description.concat(var1.toString());
        return md;
    }

    @Override
    public boolean registerBus(EventBus eventbus, LoadController controllor)
    {
        for (Plugin plugin : SharedConstants.getPlugins())
        {
            plugin.enable();
            eventbus.register(plugin);
        }
        return true;
    }

}
